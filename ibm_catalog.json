{
  "products": [
    {
      "name": "deploy-arch-ibm-container-registry",
      "label": "Cloud automation for Container Registry",
      "product_kind": "solution",
      "tags": [
        "ibm_created",
        "target_terraform",
        "terraform",
        "solution",
        "containers",
        "registry",
        "platform_engineering"
      ],
      "keywords": [
        "containers",
        "IaC",
        "infrastructure as code",
        "terraform",
        "solution",
        "registry"
      ],
      "short_description": "Creates and configures IBM Cloud Container Registry",
      "long_description": "This architecture creates a [container registry](https://cloud.ibm.com/docs/Registry?topic=Registry-getting-started) namespace, provides the ability to configure pull traffic limits and storage quotas. This solution also allows you to configure an existing namespace in the IBM Cloud Container Registry. It ensures efficient management of container image access by regulating data pull volume from the registry and setting storage capacity limits for container images within each registry.<br/><br/>ℹ️ This Terraform-based automation is part of a broader suite of IBM-maintained Infrastructure as Code (IaC) assets, each following the naming pattern \"Cloud automation for *servicename*\" and focusing on single IBM Cloud service. These single-service deployable architectures can be used on their own to streamline and automate service deployments through an [IaC approach](https://cloud.ibm.com/docs/secure-enterprise?topic=secure-enterprise-understanding-projects), or assembled together into a broader [automated IaC stack](https://cloud.ibm.com/docs/secure-enterprise?topic=secure-enterprise-config-stack) to automate the deployment of an end-to-end solution architecture. \n\nLeverage [Terraform IBM Modules](https://github.com/terraform-ibm-modules) to shape and scale your solutions. You can integrate Terraform IBM Modules (TIM) to extend functionality and design a solution tailored to your environment and operations needs. These modules offer reusable, customizable elements that follow IBM Cloud's recommended practices. You can access the [source code and documentation](https://github.com/terraform-ibm-modules/terraform-ibm-container-registry) and use it to extend your current architecture or create new solutions.",
      "offering_docs_url": "https://github.com/terraform-ibm-modules/terraform-ibm-container-registry/main/README.md",
      "offering_icon_url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-container-registry/main/images/icr_icon.svg",
      "provider_name": "IBM",
      "support_details": "This product is in the community registry, as such support is handled through the [original repo](https://github.com/terraform-ibm-modules/terraform-ibm-container-registry). If you experience issues kindly open an issue in the repository [here](https://github.com/terraform-ibm-modules/terraform-ibm-container-registry/issues). Please note that this product is not currently supported through the IBM Cloud Support Center.",
      "features": [
        {
          "title": "Container Registry Namespace",
          "description": "Enables the creation of a new Container Registry namespace or the use of an existing one, allowing users to define isolated environments for managing container images, with the ability to set a retention policy. [Learn more](https://cloud.ibm.com/docs/Registry?topic=Registry-registry_setup_cli_namespace#registry_setup_cli_namespace_plan)."
        },
        {
          "title": "Pull Traffic Limit Controls",
          "description": "Allows fine-grained configuration of pull traffic limits in megabytes, controlling the amount of data that can be pulled from the registry. [Learn more](https://cloud.ibm.com/docs/Registry?topic=Registry-registry_quota)."
        },
        {
          "title": "Sets Storage Quotas",
          "description": "Enables the configuration of storage quotas in megabytes, defining the maximum amount of storage available for container images within each registry. [Learn more](https://cloud.ibm.com/docs/Registry?topic=Registry-registry_quota)."
        },
        {
          "title": "Upgrades Registry Plan to Standard",
          "description": "Provides the ability to upgrade the container registry plan to Standard, allowing for enhanced features and capabilities. [Learn more](https://cloud.ibm.com/docs/Registry?topic=Registry-registry_overview&utm_source=chatgpt.com#registry_plans)."
        },
        {
          "title": "Composable and Extensible Architecture",
          "description": "This architecture illustrates how Terraform IBM Modules(TIM) can be integrated to deliver a complete solution on IBM Cloud. Each module is a reusable, and validated component for security, compliance, and operational IBM best practices. You can deploy this architecture as-is or configure it as code by leveraging the underlying modules to fit your specific requirements. Explore the [source code and documentation](https://github.com/terraform-ibm-modules/terraform-ibm-container-registry) to adapt, extend, or create entirely new solutions using these building blocks."
        }
      ],
      "flavors": [
        {
          "label": "Fully configurable",
          "name": "fully-configurable",
          "install_type": "fullstack",
          "index": 1,
          "working_directory": "solutions/fully-configurable",
          "short_description": "Ideal for users looking to automate the configuration of an IBM Container Registry to store and access private container images in a highly available and scalable architecture"
          "iam_permissions": [
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager"
              ],
              "service_name": "container-registry",
              "notes": "Required to manage namespaces, repositories, and access policies in Container Registry."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Viewer"
              ],
              "service_name": "Resource group only",
              "notes": "Viewer access is required in the resource group you want to provision in."
            }
          ],
          "architecture": {
            "features": [
              {
                "title": " ",
                "description": "Configured to use IBM secure-by-default standards, but can be edited to fit your use case."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "Container Registry",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-container-registry/main/reference-architectures/deployable-architecture-icr.svg",
                  "type": "image/svg+xml"
                },
                "description": "This architecture creates a Container Registry namespace to manage container images. At the registry level, it supports configuring pull traffic limits and storage quotas in megabytes, as well as upgrading the plan to Standard for additional capabilities. It can also configure an existing namespace. These features provide a structured and scalable approach to managing image storage and access across environments."
              }
            ]
          },
          "terraform_version": "1.12.2",
          "configuration": [
            {
              "key": "ibmcloud_api_key"
            },
            {
              "key": "prefix",
              "required": true,
              "default_value": "dev",
              "random_string": {
                "length": 4
              },
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "Prefix must begin with a lowercase letter and may contain only lowercase letters, digits, and hyphens '-'. It must not end with a hyphen('-'), and cannot contain consecutive hyphens ('--'). It should not exceed 16 characters.",
                  "value": "^$|^__NULL__$|^[a-z](?!.*--)(?:[a-z0-9-]{0,14}[a-z0-9])?$"
                }
              ]
            },
            {
              "key": "existing_resource_group_name",
              "display_name": "resource_group",
              "custom_config": {
                "type": "resource_group",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "identifier": "rg_name"
                }
              },
              "default_value": "Default",
              "description": "The name of an existing resource group to provision the resources."
            },
            {
              "key": "provider_visibility",
              "hidden": "true",
              "options": [
                {
                  "displayname": "Private",
                  "value": "private"
                },
                {
                  "displayname": "Public",
                  "value": "public"
                },
                {
                  "displayname": "Public-and-Private",
                  "value": "public-and-private"
                }
              ]
            },
            {
              "key": "namespace_region",
              "required": true,
              "default_value": "us-south",
              "options": [
                {
                  "displayname": "Global (global)",
                  "value": "global"
                },
                {
                  "displayname": "Tokyo (jp-tok)",
                  "value": "jp-tok"
                },
                {
                  "displayname": "Sydney (au-syd)",
                  "value": "au-syd"
                },
                {
                  "displayname": "Sao Paulo (br-sao)",
                  "value": "br-sao"
                },
                {
                  "displayname": "Montreal (ca-mon)",
                  "value": "ca-mon"
                },
                {
                  "displayname": "Toronto (ca-tor)",
                  "value": "ca-tor"
                },
                {
                  "displayname": "Frankfurt (eu-de)",
                  "value": "eu-de"
                },
                {
                  "displayname": "Madrid (eu-es)",
                  "value": "eu-es"
                },
                {
                  "displayname": "London (eu-gb)",
                  "value": "eu-gb"
                },
                {
                  "displayname": "Osaka (jp-osa)",
                  "value": "jp-osa"
                },
                {
                  "displayname": "Dallas (us-south)",
                  "value": "us-south"
                }
              ]
            },
            {
              "key": "namespace_name"
            },
            {
              "key": "existing_namespace_name"
            },
            {
              "key": "tags",
              "type": "array",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "images_per_repo"
            },
            {
              "key": "retain_untagged",
              "options": [
                {
                  "displayname": "True",
                  "value": "true"
                },
                {
                  "displayname": "False",
                  "value": "false"
                }
              ]
            },
            {
              "key": "upgrade_to_standard_plan",
              "options": [
                {
                  "displayname": "True",
                  "value": "true"
                },
                {
                  "displayname": "False",
                  "value": "false"
                }
              ]
            },
            {
              "key": "storage_megabytes"
            },
            {
              "key": "traffic_megabytes"
            }
          ],
          "ignore_readme": true
        }
      ]
    }
  ]
}
